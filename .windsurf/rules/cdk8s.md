---
trigger: always_on
---

This repository contains CDK8S definitions in TypeScript for my homelab Kubernetes cluster. Always use Context7 MCP server to look up API documentation for CDK8S. Always use cdk8s-plus when practicable, and include a justifying comment if you must fall back to base CDK8S.

Avoid adding new dependencies without getting confirmation from me first.

# Structure

- Shared code is in `lib/`. Try to keep things DRY and store things likely to be reused here.
- Use existing construts in `lib/` before building something new.
- Each app is in a subfolder under `apps`. By convention the folder name matches the Argo app and namespace name when possible.
- Each app subfolder must contain an `app.ts` file.
- Autogenerated manifests are located in the `dist/` folder. Never manually modify anything in there.
- I have some tooling in `tools/` to help with downloading CRDs for apps that need them.

# Building

- You can test changes by invoking `make`.
- Ensure files are formatted properly according to eslint rules. `make fmt` and `make lint` can be helpful here.